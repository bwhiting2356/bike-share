<ion-header>
  <custom-nav [title]="'Search Result'"></custom-nav>
</ion-header>

<ion-content>

  <ion-card class="fetching" *ngIf="fetching | async">
    <ion-card-content>
      <ion-item no-lines><ion-spinner item-start></ion-spinner>Searching database....</ion-item>
    </ion-card-content>
  </ion-card>

  <div *ngIf="!(fetching | async)" class="middle-container">

    <ion-card class="error" *ngIf="error | async">
      <ion-card-content>
        <ion-card-title>Error</ion-card-title>
        <p>{{ error | async }}</p>
      </ion-card-content>
    </ion-card>

    <div class="flex-container" *ngIf="!(error | async)">
      <div class="result">
        <ion-list>
          <div *ngIf="result">
            <trip-info [collapsed]="collapsed" [trip]="result"></trip-info>
            <button
              ion-button
              block
              [disabled]="disableButton"
              (click)="bookReservation()">
              Book this trip
            </button>
          </div>
        </ion-list>
      </div>

      <div class="map">
        <collapse-icon (click)="toggleCollapse()" [collapsed]="collapsed"></collapse-icon>
        <google-map [collapsed]="collapsed"
                    [origin]="origin"
                    [destination]="destination"
                    [stationStart]="result.stationStart.coords || null"
                    [stationEnd]="result ? result.stationEnd.coords : null"
                    [walking1Points]="result ? result.walking1Travel.points : null"
                    [bicyclingPoints]="result ? result.bicyclingTravel.points : null"
                    [walking2Points]="result ? result.walking2Travel.points : null">
        </google-map>
      </div>

    </div>
  </div>
</ion-content>
